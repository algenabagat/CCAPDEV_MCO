<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Register - Lab Reservation System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  </head>
  <body>
    <!-- Navbar (same as other pages) -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary custom-navbar" data-bs-theme="dark">
      <div class="container-fluid">
        <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
          <ul class="navbar-nav mx-auto mb-2 mb-lg-0 text-center">
            <li class="nav-item">
              <a class="navbar-brand nav-link" href="index.html">Lab Reservation System</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="profile.html">Profile</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Reservation</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Make a Reservation</a></li>
                <li><a class="dropdown-item" href="#">My Reservations</a></li>
              </ul>
            </li>
            <li class="nav-item"><a class="nav-link active" href="register.html">Register</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
      <div class="container-fluid py-5">
        <div class="registration-container">
          <h2 class="text-center mb-4">Create an Account</h2>
          
          <!-- Account Type Selection -->
          <div class="mb-4">
            <p class="text-center mb-3">Select account type:</p>
            <div class="row">
              <div class="col-md-6">
                <button id="student-btn" class="btn btn-outline-success account-type-btn active">
                  <i class="bi bi-person-fill me-2"></i>Student
                </button>
              </div>
              <div class="col-md-6">
                <button id="tech-btn" class="btn btn-outline-success account-type-btn">
                  <i class="bi bi-tools me-2"></i>Lab Technician
                </button>
              </div>
            </div>
            <input type="hidden" id="account-type" name="account-type" value="student">
          </div>
          
          <!-- Registration Form -->
          <form id="registration-form">
              <div class="mb-3">
              <label for="f-name" class="form-label">First Name</label>
              <input type="text" class="form-control" id="f-name" name="f-name" required>
            </div>

            <div class="mb-3">
              <label for="l-name" class="form-label">Last Name</label>
              <input type="text" class="form-control" id="l-name" name="l-name" required>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">DLSU Email</label>
              <input type="email" class="form-control" id="email" name="email" 
                     placeholder="e.g. juan.delacruz@dlsu.edu.ph" required
                     pattern=".+@dlsu\.edu\.ph$">
              <div class="invalid-feedback">
                Please enter a valid DLSU email address (must end with @dlsu.edu.ph)
              </div>
            </div>
            
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" id="password" name="password" 
                     minlength="8" required>
              <div class="invalid-feedback">
                Password must be at least 8 characters long
              </div>
            </div>
            
            <div class="mb-3">
              <label for="confirm-password" class="form-label">Confirm Password</label>
              <input type="password" class="form-control" id="confirm-password" 
                     name="confirm-password" required>
              <div class="invalid-feedback">
                Passwords do not match
              </div>
            </div>
            
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-success btn-lg mt-3">
                <i class="bi bi-person-plus-fill me-2"></i>Register
              </button>
            </div>
            
            <div class="text-center mt-3">
              <p>Already have an account? <a href="login.html">Login here</a></p>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Footer -->
      <footer class="bg-success text-white mt-4">
        <div class="footer container-fluid text-center align-items-center py-3">
          <p>&copy; 2023 Lab Reservation System. All rights reserved.</p>
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
  // Account type selection
  $('.account-type-btn').click(function(e) {
    e.preventDefault();
    $('.account-type-btn').removeClass('active');
    $(this).addClass('active');
    $('#account-type').val($(this).attr('id').replace('-btn', ''));
  });

  // Password validation
  $('#confirm-password').on('keyup', function() {
    if ($(this).val() !== $('#password').val()) {
      $(this).addClass('is-invalid');
    } else {
      $(this).removeClass('is-invalid');
    }
  });

  // Email validation
  $('#email').on('blur', function() {
    if (!this.checkValidity()) {
      $(this).addClass('is-invalid');
    } else {
      $(this).removeClass('is-invalid');
    }
  });

  // Form submission
  $('#registration-form').submit(function(e) {
    e.preventDefault();
    
    // Front-end validation
    if (!this.checkValidity()) {
      e.stopPropagation();
      $(this).addClass('was-validated');
      return;
    }

    // Check if email already exists
    if (isEmailRegistered($('#email').val())) {
      alert('This email is already registered. Please use a different email or login.');
      $('#email').addClass('is-invalid');
      return;
    }

    // Create user object
    const user = {
      firstName: $('#f-name').val(),
      lastName: $('#l-name').val(),
      email: $('#email').val(),
      password: $('#password').val(),
      accountType: $('#account-type').val(),
      registeredAt: new Date().toISOString()
    };

    // Save user data
    saveUser(user);
    
    // Show success and redirect
    alert('Registration successful! You can now login.');
    window.location.href = 'login.html';
  });

  // Check if email is already registered
  function isEmailRegistered(email) {
    const users = getAllUsers();
    return users.some(user => user.email === email);
  }

  // Get all registered users from localStorage
  function getAllUsers() {
    return JSON.parse(localStorage.getItem('labUsers') || '[]');
  }

  // Save new user to localStorage
  function saveUser(user) {
    const users = getAllUsers();
    users.push(user);
    localStorage.setItem('labUsers', JSON.stringify(users));
    
    // Also store as current user (for immediate login)
    localStorage.setItem('currentUser', JSON.stringify(user));
  }
});
</script>
  </body>
</html>